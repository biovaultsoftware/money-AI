<!--
  MONEY AI ‚Äî Rush ‚Üí Rich PWA (UPDATED index.html)
  Purpose of this update:
  - Fix broken thread scrolling by enforcing correct flex layout (min-height:0)
  - Ensure #thread is the ONLY scroll container
  - Keep IDs/classes matching your updated main.js

  Based on your uploaded structure/main.js expectations :contentReference[oaicite:0]{index=0}
-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0a0c10" />
  <title>Money AI</title>

  <!-- Manifest injected by main.js -->
  <link id="manifestLink" rel="manifest" href="" />

  <style>
    :root{
      --bg:#0a0c10;
      --panel:#0f1520;
      --panel2:#0d121b;
      --text:#e8eefc;
      --text2:#9fb0d0;
      --border:rgba(255,255,255,.08);
      --shadow: 0 18px 60px rgba(0,0,0,.55);

      --glow-accent: rgba(249,115,22,.45);

      --coalA:#0a0c10;
      --coalB:#111827;

      --emberA:#0b0b0f;
      --emberB:#1f2937;

      --bronzeA:#0b0c0f;
      --bronzeB:#1a2230;

      --goldA:#08090c;
      --goldB:#101827;
    }

    /* Themes controlled by main.js via body[data-theme] */
    body[data-theme="coal"]{
      --bg: var(--coalA);
      --panel: #0f1520;
      --panel2: #0d121b;
      --glow-accent: rgba(249,115,22,.35);
    }
    body[data-theme="ember"]{
      --bg: var(--emberA);
      --panel: #121723;
      --panel2: #0d121b;
      --glow-accent: rgba(245,158,11,.45);
    }
    body[data-theme="bronze"]{
      --bg: var(--bronzeA);
      --panel: #121a28;
      --panel2: #0d121b;
      --glow-accent: rgba(59,130,246,.35);
    }
    body[data-theme="gold"]{
      --bg: var(--goldA);
      --panel: #101828;
      --panel2: #0d121b;
      --glow-accent: rgba(251,191,36,.50);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background: radial-gradient(1200px 800px at 20% 0%, rgba(249,115,22,.12), transparent 60%),
                  radial-gradient(800px 600px at 100% 20%, rgba(59,130,246,.10), transparent 55%),
                  var(--bg);
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow:hidden; /* IMPORTANT: prevent body scroll; thread scrolls */
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Lock Screen
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    #lockScreen{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      background: radial-gradient(1000px 700px at 30% 10%, rgba(249,115,22,.16), transparent 55%),
                  radial-gradient(900px 600px at 90% 40%, rgba(34,197,94,.12), transparent 60%),
                  #07090d;
      z-index:50;
    }
    #lockScreen.hidden{ display:none; }

    .lock-card{
      width:min(520px, 100%);
      background: rgba(15,21,32,.72);
      border:1px solid var(--border);
      border-radius:22px;
      box-shadow: var(--shadow);
      padding:22px;
      backdrop-filter: blur(14px);
    }
    .lock-top{
      display:flex;
      gap:14px;
      align-items:center;
      margin-bottom:14px;
    }
    #lockLogo{
      width:54px;
      height:54px;
      border-radius:16px;
      display:grid;
      place-items:center;
      background: linear-gradient(135deg, rgba(249,115,22,.95), rgba(10,12,16,.95));
      box-shadow: 0 0 60px var(--glow-accent);
      font-weight:900;
      font-size:22px;
    }
    .lock-title{
      display:flex;
      flex-direction:column;
      line-height:1.1;
    }
    .lock-title b{ font-size:18px; }
    .lock-title span{ color:var(--text2); font-size:13px; }

    .lock-actions{
      display:flex;
      gap:10px;
      margin-top:12px;
      flex-wrap:wrap;
    }
    .btn{
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:11px 14px;
      border-radius:14px;
      cursor:pointer;
      font-weight:700;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
      user-select:none;
    }
    .btn:hover{ background: rgba(255,255,255,.09); }
    .btn:active{ transform: translateY(1px); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(249,115,22,.95), rgba(245,158,11,.55));
      border-color: rgba(249,115,22,.5);
      color:#0a0c10;
    }
    .btn.primary:hover{ filter: brightness(1.03); }

    #lockWarning{
      margin-top:10px;
      font-size:13px;
      color:#ffcfad;
      opacity:0;
      transform: translateY(4px);
      transition: .2s ease;
    }
    #lockWarning.visible{
      opacity:1;
      transform: translateY(0);
    }
    .hidden{ display:none !important; }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       App Shell
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    #app{
      height:100%;
      display:flex;
      overflow:hidden;
    }
    #app.locked{
      filter: blur(2px);
      pointer-events:none;
      user-select:none;
    }

    /* Sidebar */
    #sidebar{
      width: 360px;
      max-width: 86vw;
      border-right: 1px solid var(--border);
      background: rgba(13,18,27,.72);
      backdrop-filter: blur(14px);
      display:flex;
      flex-direction:column;
      min-height:0;
    }
    .sidebar-top{
      padding:14px 14px 10px;
      border-bottom:1px solid var(--border);
    }
    .brand{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:10px;
    }
    .brand .name{
      font-weight:900;
      letter-spacing:.2px;
    }
    .stories-strip{
      display:flex;
      gap:10px;
      overflow:auto;
      padding:10px 2px 4px;
      scrollbar-width:none;
    }
    .stories-strip::-webkit-scrollbar{ height:0; }
    .story-item{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
      cursor:pointer;
      min-width:64px;
    }
    .story-ring{
      width:54px;
      height:54px;
      border-radius:18px;
      padding:3px;
      background: linear-gradient(135deg, rgba(249,115,22,.95), rgba(59,130,246,.65));
    }
    .story-ring.read{
      background: rgba(255,255,255,.10);
    }
    .story-avatar{
      width:100%;
      height:100%;
      border-radius:16px;
      display:grid;
      place-items:center;
      background: rgba(10,12,16,.92);
      font-size:22px;
    }
    .story-name{
      font-size:12px;
      color:var(--text2);
    }
    .search{
      margin-top:10px;
      display:flex;
      gap:10px;
    }
    #searchInput{
      width:100%;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.05);
      color:var(--text);
      outline:none;
    }

    #chatList{
      padding:10px;
      overflow:auto;
      min-height:0;
    }
    .chat-item{
      display:flex;
      gap:12px;
      align-items:center;
      padding:10px 10px;
      border-radius:16px;
      cursor:pointer;
      border:1px solid transparent;
      transition: .15s ease;
      position:relative;
    }
    .chat-item:hover{
      background: rgba(255,255,255,.05);
      border-color: rgba(255,255,255,.08);
    }
    .chat-item.active{
      background: rgba(255,255,255,.06);
      border-color: rgba(249,115,22,.28);
    }
    .chat-avatar{
      width:44px;
      height:44px;
      border-radius:16px;
      display:grid;
      place-items:center;
      font-size:20px;
      flex:0 0 auto;
    }
    .chat-meta{ flex:1; min-width:0; }
    .chat-header{
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:center;
      margin-bottom:2px;
    }
    .chat-name{ font-weight:800; }
    .chat-time{ font-size:12px; color:var(--text2); }
    .chat-preview{
      font-size:13px;
      color:rgba(232,238,252,.78);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .chat-badge{
      min-width:22px;
      height:22px;
      border-radius:999px;
      display:grid;
      place-items:center;
      background: rgba(249,115,22,.25);
      border:1px solid rgba(249,115,22,.35);
      color:#ffd2b3;
      font-size:12px;
      font-weight:900;
    }

    /* Main Area */
    #mainArea{
      flex:1;
      display:flex;
      min-width:0;
      min-height:0;
      background: rgba(10,12,16,.15);
    }

    /* Empty State */
    #emptyState{
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:22px;
      min-height:0;
    }
    #emptyState.hidden{ display:none; }
    .empty-card{
      width:min(640px, 100%);
      border:1px solid var(--border);
      background: rgba(15,21,32,.60);
      border-radius:22px;
      padding:20px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
    }
    .empty-card h2{ margin:0 0 6px; }
    .empty-card p{ margin:0 0 14px; color:var(--text2); line-height:1.45; }

    /* Chat View */
    #chatView{
      flex:1;
      display:flex;
      min-width:0;
      min-height:0;
    }
    #chatView.hidden{ display:none; }

    /* CRITICAL FIX: chat-view must be a flex column with min-height:0 */
    .chat-view{
      flex: 1;
      display:flex;
      flex-direction:column;
      min-height:0; /* ‚Üê this fixes scroll on all browsers */
      min-width:0;
    }

    .chat-headerbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px 14px;
      border-bottom:1px solid var(--border);
      background: rgba(13,18,27,.55);
      backdrop-filter: blur(14px);
    }
    .left-head{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    #btnBack{
      display:none;
    }
    .head-avatar{
      width:42px;
      height:42px;
      border-radius:16px;
      display:grid;
      place-items:center;
      font-size:20px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      flex:0 0 auto;
    }
    .head-meta{ min-width:0; }
    .head-meta b{
      display:block;
      font-size:15px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .head-meta span{
      display:block;
      font-size:12px;
      color:var(--text2);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      margin-top:2px;
    }
    .right-head{
      display:flex;
      align-items:center;
      gap:10px;
      flex:0 0 auto;
    }
    .pill{
      display:flex;
      align-items:center;
      gap:8px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.05);
      font-size:12px;
      color:var(--text2);
      user-select:none;
    }
    .pill.warning{
      border-color: rgba(249,115,22,.45);
      color:#ffd2b3;
    }

    .iconbtn{
      width:40px;
      height:40px;
      border-radius:14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      display:grid;
      place-items:center;
      font-weight:900;
    }
    .iconbtn:hover{ background: rgba(255,255,255,.09); }

    /* Thread ‚Äî THIS must scroll */
    #thread{
      flex:1;
      min-height:0;         /* CRITICAL */
      overflow:auto;        /* CRITICAL */
      padding: 14px 14px 10px;
      scroll-behavior: smooth;
      overscroll-behavior: contain;
    }

    .message-row{
      display:flex;
      gap:10px;
      margin: 10px 0;
      align-items:flex-end;
    }
    .message-row.in{ justify-content:flex-start; }
    .message-row.out{ justify-content:flex-end; }

    .msg-avatar{
      width:28px;
      height:28px;
      border-radius:10px;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,.07);
      border: 1px solid rgba(255,255,255,.10);
      flex:0 0 auto;
      font-size:14px;
      margin-bottom:2px;
    }

    .bubble{
      max-width: min(560px, 82%);
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.08);
      border-radius:18px;
      padding:10px 12px;
      box-shadow: 0 12px 28px rgba(0,0,0,.22);
    }
    .message-row.out .bubble{
      background: rgba(249,115,22,.16);
      border-color: rgba(249,115,22,.18);
    }

    .bubble-tag{
      display:flex;
      align-items:center;
      gap:6px;
      font-size:12px;
      color:var(--text2);
      margin-bottom:6px;
    }
    .bubble-tag .dot{
      width:8px;
      height:8px;
      border-radius:999px;
      background: rgba(249,115,22,.7);
      box-shadow: 0 0 18px rgba(249,115,22,.35);
    }
    .bubble-content{
      line-height:1.45;
      white-space:pre-wrap;
      word-wrap:break-word;
      font-size:14px;
    }
    .bubble-meta{
      margin-top:8px;
      display:flex;
      justify-content:flex-end;
      font-size:11px;
      color: rgba(232,238,252,.55);
    }
    .bubble-actions{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:10px;
    }
    .chip-btn{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:8px 10px;
      border-radius:999px;
      cursor:pointer;
      font-weight:800;
      font-size:12px;
    }
    .chip-btn:hover{ background: rgba(255,255,255,.09); }

    /* Typing indicator */
    .typing-indicator{
      display:flex;
      align-items:center;
      gap:10px;
      margin: 10px 0 2px;
      color:var(--text2);
    }
    .typing-dots{
      display:flex;
      gap:5px;
      padding:10px 12px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.08);
      border-radius:18px;
    }
    .typing-dots span{
      width:6px;height:6px;border-radius:999px;
      background: rgba(232,238,252,.6);
      animation: dot 1.1s infinite ease-in-out;
    }
    .typing-dots span:nth-child(2){ animation-delay:.15s; }
    .typing-dots span:nth-child(3){ animation-delay:.3s; }
    @keyframes dot{
      0%,100%{ transform: translateY(0); opacity:.6; }
      50%{ transform: translateY(-3px); opacity:1; }
    }

    /* Composer */
    .composer{
      border-top:1px solid var(--border);
      padding: 10px 12px;
      background: rgba(13,18,27,.55);
      backdrop-filter: blur(14px);
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    #quickActions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .quick-btn{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:8px 10px;
      border-radius:999px;
      cursor:pointer;
      font-weight:900;
      font-size:12px;
    }
    .quick-btn:hover{ background: rgba(255,255,255,.09); }

    .composer-row{
      display:flex;
      gap:10px;
      align-items:flex-end;
    }
    #msgInput{
      flex:1;
      min-width:0;
      resize:none;
      max-height:120px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      outline:none;
      line-height:1.35;
      font-size:14px;
    }
    #btnSend{
      width:46px;height:46px;
      border-radius:16px;
      border:1px solid rgba(249,115,22,.25);
      background: linear-gradient(135deg, rgba(249,115,22,.95), rgba(245,158,11,.65));
      color:#0a0c10;
      font-weight:1000;
      cursor:pointer;
      display:grid;
      place-items:center;
    }
    #btnSend:disabled{
      opacity:.45;
      cursor:not-allowed;
      filter: grayscale(.25);
    }

    /* Insights Panel (desktop right rail) */
    #insightsPanel{
      width: 320px;
      border-left:1px solid var(--border);
      background: rgba(13,18,27,.72);
      backdrop-filter: blur(14px);
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:12px;
      min-height:0;
    }
    .ins-card{
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.05);
      border-radius:18px;
      padding:12px;
    }
    .mode-pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      border-radius:999px;
      padding:7px 10px;
      border:1px solid rgba(255,255,255,.10);
      color:var(--text2);
      font-weight:900;
      font-size:12px;
    }
    .mode-pill.rich{
      border-color: rgba(34,197,94,.30);
      color:#bfffe0;
    }
    .bar{
      height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.06);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.08);
    }
    .bar > i{
      display:block;
      height:100%;
      width:50%;
      background: rgba(249,115,22,.45);
    }
    .bar.rich > i{ background: rgba(34,197,94,.40); }

    .kv{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      font-size:12px;
      color:var(--text2);
      margin-top:8px;
    }
    .focus-tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:14px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.08);
      font-size:12px;
      font-weight:900;
      color: rgba(232,238,252,.85);
    }
    .focus-tag .icon{
      font-size:14px;
    }
    .stat-grid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:10px;
      margin-top:10px;
    }
    .stat{
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.05);
      border-radius:14px;
      padding:10px;
    }
    .stat b{ display:block; font-size:18px; }
    .stat span{ display:block; font-size:12px; color:var(--text2); margin-top:2px; }

    /* Drawer (mobile insights) */
    #drawer{
      position:fixed;
      left:0; right:0; bottom:0;
      height: 70vh;
      background: rgba(13,18,27,.90);
      backdrop-filter: blur(16px);
      border-top:1px solid rgba(255,255,255,.10);
      transform: translateY(110%);
      transition: .22s ease;
      z-index:40;
      padding:14px;
      overflow:auto;
      border-radius: 22px 22px 0 0;
    }
    #drawer.open{ transform: translateY(0); }
    #drawerOverlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.48);
      opacity:0;
      pointer-events:none;
      transition:.18s ease;
      z-index:39;
    }
    #drawerOverlay.visible{
      opacity:1;
      pointer-events:auto;
    }

    /* Reel Viewer */
    #reelViewer{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.72);
      display:none;
      z-index:60;
      padding:18px;
    }
    #reelViewer.open{ display:flex; align-items:center; justify-content:center; }
    .reel-card{
      width:min(520px, 100%);
      border-radius:22px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(13,18,27,.92);
      backdrop-filter: blur(16px);
      padding:16px;
      box-shadow: var(--shadow);
    }
    .reel-top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
    }
    .reel-author{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:900;
    }
    .reel-avatar{
      width:40px;height:40px;
      border-radius:16px;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.08);
      font-size:18px;
    }
    .reel-title{
      font-size:18px;
      font-weight:1000;
      margin:8px 0 0;
    }
    .reel-lines p{
      margin:10px 0;
      color: rgba(232,238,252,.88);
      line-height:1.55;
    }
    .reel-cta{
      margin-top:10px;
      border:1px dashed rgba(249,115,22,.35);
      background: rgba(249,115,22,.10);
      padding:10px 12px;
      border-radius:16px;
      font-weight:900;
      color:#ffd2b3;
      text-align:center;
    }
    .reel-reply{
      margin-top:12px;
      display:flex;
      gap:10px;
      align-items:center;
    }
    #reelReplyInput{
      flex:1;
      min-width:0;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      outline:none;
    }

    /* Toast */
    #toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform: translateX(-50%) translateY(24px);
      opacity:0;
      transition:.18s ease;
      z-index:80;
      pointer-events:none;
    }
    #toast.visible{
      opacity:1;
      transform: translateX(-50%) translateY(0);
    }
    .toast-card{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(13,18,27,.92);
      backdrop-filter: blur(14px);
      padding:10px 12px;
      border-radius:16px;
      box-shadow: var(--shadow);
      color: rgba(232,238,252,.90);
      font-weight:900;
      font-size:13px;
    }

    /* Responsive */
    @media (max-width: 980px){
      #sidebar{ width: 340px; }
      #insightsPanel{ display:none; }
      #btnInsights{ display:grid; }
    }
    @media (max-width: 760px){
      #sidebar{ display:none; }
      #btnBack{ display:grid; }
      .chat-headerbar{ padding:10px 12px; }
      #thread{ padding:12px 12px 8px; }
    }
  </style>
</head>

<body data-theme="coal" data-route="home">

  <!-- Lock Screen -->
  <div id="lockScreen">
    <div class="lock-card">
      <div class="lock-top">
        <div id="lockLogo">M</div>
        <div class="lock-title">
          <b>Money AI</b>
          <span>Rush ‚Üí Rich mindset vault</span>
        </div>
      </div>

      <div style="color:var(--text2); font-size:13px; line-height:1.5;">
        Unlock to access your private chats with the mentors.
      </div>

      <div id="lockWarning"></div>

      <div class="lock-actions">
        <button id="btnUnlock" class="btn primary">üîê Unlock (Biometric)</button>
        <button id="btnUnlockDemo" class="btn hidden">üö™ Demo Mode</button>
      </div>
    </div>
  </div>

  <!-- App -->
  <div id="app" class="locked">

    <!-- Sidebar -->
    <aside id="sidebar">
      <div class="sidebar-top">
        <div class="brand">
          <div class="name">Money AI</div>
          <div style="color:var(--text2); font-size:12px;">Vault</div>
        </div>

        <div id="storiesStrip" class="stories-strip"></div>

        <div class="search">
          <input id="searchInput" type="text" placeholder="Search mentors..." autocomplete="off" />
        </div>
      </div>

      <div id="chatList"></div>
    </aside>

    <!-- Main Area -->
    <main id="mainArea">

      <!-- Empty State -->
      <section id="emptyState">
        <div class="empty-card">
          <h2>Pick a mentor.</h2>
          <p>
            This is not a finance app. It‚Äôs a private thinking space.
            Daily reels appear at the top ‚Äî tap one and DM the hook.
          </p>
          <button id="btnStartChat" class="btn primary">‚ñ∂ Start from Today‚Äôs Reel</button>
        </div>
      </section>

      <!-- Chat View -->
      <section id="chatView" class="hidden">
        <div class="chat-view">
          <!-- Header -->
          <div class="chat-headerbar">
            <div class="left-head">
              <button id="btnBack" class="iconbtn" title="Back">‚Üê</button>
              <div id="headerAvatar" class="head-avatar">üí¨</div>
              <div class="head-meta">
                <b id="headerName">Mentor</b>
                <span id="headerStatus">Status</span>
              </div>
            </div>

            <div class="right-head">
              <div id="sessionLimit" class="pill">
                <span>Msgs</span>
                <b id="msgCount" style="color:var(--text);">0</b>
                <span>/12</span>
              </div>

              <button id="btnCouncil" class="iconbtn" title="Council">üèõÔ∏è</button>
              <button id="btnInsights" class="iconbtn" title="Insights">üìä</button>
            </div>
          </div>

          <!-- Thread -->
          <div id="thread"></div>

          <!-- Composer -->
          <div class="composer">
            <div id="quickActions">
              <button class="quick-btn" data-action="mission">üéØ Mission</button>
              <button class="quick-btn" data-action="audit">‚è±Ô∏è Time Audit</button>
              <button class="quick-btn" data-action="map">üó∫Ô∏è Money Map</button>
            </div>

            <div class="composer-row">
              <textarea id="msgInput" rows="1" placeholder="Type a message‚Ä¶"></textarea>
              <button id="btnSend" disabled title="Send">‚û§</button>
            </div>
          </div>
        </div>

        <!-- Insights Panel (desktop) -->
        <aside id="insightsPanel">
          <div class="ins-card">
            <div id="modePill" class="mode-pill">
              <span>Mode:</span> <span id="modeLabel">Rush Mode</span>
            </div>

            <div style="margin-top:12px;">
              <div class="kv"><span>Rush</span><span id="rushValue">70</span></div>
              <div class="bar"><i id="rushBar" style="width:70%"></i></div>

              <div class="kv" style="margin-top:10px;"><span>Rich</span><span id="richValue">30</span></div>
              <div class="bar rich"><i id="richBar" style="width:30%"></i></div>
            </div>
          </div>

          <div class="ins-card">
            <div id="focusTag" class="focus-tag">
              <span class="icon">üó∫Ô∏è</span><span>General Money Map</span>
            </div>
            <div style="margin-top:10px;">
              <b id="focusLabel" style="display:block; font-size:14px;">General Money Map</b>
              <div id="focusDesc" style="color:var(--text2); font-size:13px; line-height:1.45; margin-top:6px;">
                The clearer you describe the pain, the sharper your Money Map becomes.
              </div>
            </div>
          </div>

          <div class="ins-card">
            <b style="display:block; margin-bottom:8px;">Stats</b>
            <div class="stat-grid">
              <div class="stat"><b id="statUserMsgs">0</b><span>User msgs</span></div>
              <div class="stat"><b id="statAiMsgs">0</b><span>AI msgs</span></div>
              <div class="stat"><b id="statAge">‚Äî</b><span>Thread age</span></div>
              <div class="stat"><b id="statActions">0</b><span>Rich actions</span></div>
            </div>
          </div>

          <div class="ins-card">
            <b style="display:block; margin-bottom:8px;">Next step</b>
            <div id="nextStep" style="color:rgba(232,238,252,.88); line-height:1.45;">
              Describe your main pain: debts, no job, or weak business.
            </div>
          </div>
        </aside>
      </section>
    </main>
  </div>

  <!-- Drawer Overlay + Drawer -->
  <div id="drawerOverlay"></div>
  <div id="drawer"></div>

  <!-- Reel Viewer -->
  <div id="reelViewer">
    <div class="reel-card">
      <div class="reel-top">
        <div class="reel-author">
          <div id="reelAvatar" class="reel-avatar">üôÇ</div>
          <div>
            <div id="reelAuthor">Mentor</div>
            <div style="color:var(--text2); font-size:12px;">Daily Reel</div>
          </div>
        </div>
        <button id="btnCloseReel" class="iconbtn" title="Close">‚úï</button>
      </div>

      <div id="reelTitle" class="reel-title">Title</div>
      <div id="reelLines" class="reel-lines"></div>
      <div id="reelCta" class="reel-cta">DM me "HOW"</div>

      <div class="reel-reply">
        <input id="reelReplyInput" type="text" placeholder='Reply with "HOW"...' />
        <button id="btnReelSend" class="btn primary" style="padding:10px 12px;">Send</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast">
    <div class="toast-card" id="toastText">Toast</div>
  </div>

  <!-- IMPORTANT: make sure this path matches your project -->
  <script src="./main.js"></script>
</body>
</html>
